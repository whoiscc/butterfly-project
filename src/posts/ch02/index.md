# 第二章 - 每秒计数

这个例子仍然不受到外界环境的影响，但它不再是恒定不变的了。

<div id="box"></div>

为了得到一个每秒钟更新的页面，首先我们要得到一个每秒钟一次的信号（代码顶端的`import ...`与上一个例子一样，此处省略）

{% include_code index.js 8:11 %}

接下来，将信号变换为每秒钟递增的计数器

{% include_code index.js 12:15 %}

获得了页面被加载或经过的秒数，我们可以用这个信息创建视图了

{% include_code index.js 16:29 %}

最后在`main`函数中，将视图渲染到页面上

{% include_code index.js 30:38 %}

注意到这个`main`函数和之前有所不同，它返回了一个用于善后清理工作的函数。这个函数将在页面被切换到其他章节时被调用，以阻止这一章的代码继续尝试抢夺对展示区的控制权。

可以看到，`context`参数只是被简单地向下传递（虽然到最后也没用上）。如果你对自己的代码理解能力充满自信，完全可以把这三个函数合并为一个——甚至全部合并到`main`函数里也未尝不可。当然了，在创建视图之前也可以先抽象出一个`howManyPeopleDiedStream`来简化`tickViewStream`函数。代码基本单元的颗粒度，完全可以根据个人喜好来掌握。作为一篇教程向的文章，这里倾向于更繁琐而细致的写法。
